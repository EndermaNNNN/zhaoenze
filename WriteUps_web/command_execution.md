# command execution

## 解题思路：

- 题目说小宁只写了ping没开waf（web application firewall），那就可以通过在ping命令后面夹带东西来获取shell的写入权限，我们可以直接把输入框当作shell输入界面（只不过它提前帮你输入了 ```ping``` 四个字母）。

- 首先构造一个句子： ```127.0.0.1 && ls``` ,填进输入框发过去之后，服务器会执行ping命令 **和 ls命令** ，可以用它来查看当前目录下面都有哪些文件。

- 查看第一层目录，发现只有index.php，然后就不会了，查阅网上的资料发现全都直奔三级目录，到底为什么他们能直接确定在三级目录里啊！

    仔细想了想，很有可能是把所有的文件夹都试了一遍：先 ```127.0.0.1 && ls ../``` 进第一层，挨个文件夹找，没有就 ```127.0.0.1 && ls ../../``` 进第二层，以此类推，直到在第三层的home文件夹里找到了flag。

    提醒了我，可以直接用 ```ls ../``` 显示当前目录的所有东西，挨个找就完事儿了。

    **但这实在太蠢了。**

- 以此为基础，我都进来了，为什么不 **直接用Linux里自带的查找命令** 呢？

    于是直接用 ```127.0.0.1 && find / -name flag.txt``` ，成功，系统返回告诉我： ```/home/flag.txt``` ，剩下的就不用多说了。

- 直接输入： ```127.0.0.1 && cat /home/flag.txt``` ，服务器直接就把flag的内容返回给我们了。

- 知识点：

- 当服务器直接把用户输入当作语句的一部分执行时，就可能存在命令执行漏洞，可以通过管道符来将命令语句附加在参数后面进行提交。